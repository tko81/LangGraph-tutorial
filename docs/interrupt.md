æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘æ¥ä¸ºä½ è§£é‡Šè¿™æ®µ `interrupt` å‡½æ•°çš„è¯´æ˜ï¼š

## ğŸ¯ **å‡½æ•°ä½œç”¨**
`interrupt` å‡½æ•°ç”¨äºåœ¨èŠ‚ç‚¹å†…éƒ¨**ä¸­æ–­å›¾çš„æ‰§è¡Œ**ï¼Œå®ç°äººæœºäº¤äº’å·¥ä½œæµã€‚

## ğŸ“‹ **æ ¸å¿ƒæœºåˆ¶**

### 1ï¸âƒ£ **æš‚åœä¸æ¢å¤**
- **ç¬¬ä¸€æ¬¡è°ƒç”¨**: æŠ›å‡º `GraphInterrupt` å¼‚å¸¸ï¼Œæš‚åœæ‰§è¡Œ
- **æ¢å¤æ—¶**: ä»èŠ‚ç‚¹å¼€å¤´**é‡æ–°æ‰§è¡Œ**æ‰€æœ‰é€»è¾‘
- **å†æ¬¡è°ƒç”¨**: è¿”å›æ¢å¤æ—¶æä¾›çš„æ•°æ®

### 2ï¸âƒ£ **æ•°æ®æµå‘**
- **å‘é€**: `interrupt("what is your age?")` - å‘å®¢æˆ·ç«¯å‘é€è¯·æ±‚
- **æ¥æ”¶**: é€šè¿‡ `Command(resume=...)` æ¥æ”¶äººç±»å›åº”
- **è¿”å›**: `interrupt()` è¿”å›æ¢å¤æ•°æ®

### 3ï¸âƒ£ **å¤šä¸­æ–­å¤„ç†**
- å¦‚æœèŠ‚ç‚¹å†…æœ‰å¤šä¸ª `interrupt()` è°ƒç”¨
- LangGraph æŒ‰**è°ƒç”¨é¡ºåº**åŒ¹é…æ¢å¤å€¼
- æ¯ä¸ªä»»åŠ¡æœ‰ç‹¬ç«‹çš„æ¢å¤å€¼åˆ—è¡¨

## ğŸ”„ **æ‰§è¡Œæµç¨‹**

```python
def node(state):
    answer = interrupt("what is your age?")  # ç¬¬ä¸€æ¬¡ï¼šæš‚åœ
    print(f"Received: {answer}")             # æ¢å¤åï¼šæ‰§è¡Œ
    return {"human_value": answer}
```

**æ‰§è¡Œæ­¥éª¤**ï¼š
1. æ‰§è¡Œåˆ° `interrupt()` â†’ æŠ›å‡ºå¼‚å¸¸æš‚åœ
2. å®¢æˆ·ç«¯æ”¶åˆ°ä¸­æ–­ä¿¡æ¯
3. å®¢æˆ·ç«¯æä¾› `Command(resume="25")`
4. **é‡æ–°æ‰§è¡Œæ•´ä¸ªèŠ‚ç‚¹**
5. `interrupt()` è¿”å› `"25"`
6. ç»§ç»­æ‰§è¡Œåç»­ä»£ç 

## ğŸ“ **è¿”å›å€¼ç±»å‹**

æ ¹æ®æ–‡æ¡£è¯´æ˜ï¼š
- **è¿”å›ç±»å‹**: `Any` - å¯ä»¥æ˜¯ä»»ä½•ç±»å‹
- **å…·ä½“å†…å®¹**: `Command.resume` å­—æ®µçš„å€¼
- **ç¤ºä¾‹**: å¦‚æœ `Command(resume="some input")` â†’ è¿”å› `"some input"`

## âš ï¸ **é‡è¦è¦æ±‚**

1. **å¿…é¡»å¯ç”¨æ£€æŸ¥ç‚¹**: `graph.compile(checkpointer=memory)`
2. **èŠ‚ç‚¹ä¼šé‡æ–°æ‰§è¡Œ**: ä»å¤´å¼€å§‹æ‰§è¡Œæ‰€æœ‰é€»è¾‘
3. **ä½œç”¨åŸŸé™åˆ¶**: æ¢å¤å€¼ä»…åœ¨å½“å‰ä»»åŠ¡å†…æœ‰æ•ˆ

## ğŸ’¡ **å®é™…åº”ç”¨åœºæ™¯**

- äººå·¥å®¡æ‰¹å·¥ä½œæµ
- éœ€è¦å¤–éƒ¨è¾“å…¥çš„å†³ç­–
- é”™è¯¯å¤„ç†éœ€è¦äººå·¥å¹²é¢„
- å¤æ‚ä»»åŠ¡çš„åˆ†æ­¥ç¡®è®¤

**æ ¸å¿ƒç†è§£**: `interrupt()` æ˜¯ä¸€ä¸ª"æš‚åœæŒ‰é’®"ï¼Œè®© AI å¯ä»¥ä¸»åŠ¨è¯·æ±‚äººç±»å¸®åŠ©ï¼

### ğŸ”„ **Command å’Œ interrupt æœºåˆ¶è¯¦è§£**

#### ğŸ¯ **ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·ä½¿ç”¨ `Command(resume={"data": human_response})`ï¼Ÿ**

è¿™æ¶‰åŠåˆ° LangGraph çš„**äººæœºäº¤äº’å¾ªç¯**æœºåˆ¶ï¼Œè®©æˆ‘ä»¬åˆ†æ­¥è§£é‡Šï¼š

#### 1ï¸âƒ£ **interrupt() å‡½æ•°çš„å·¥ä½œåŸç†**

```python
@tool
def human_assistance(query: str) -> str:
    human_response = interrupt({"query": query})  # ğŸ›‘ æš‚åœæ‰§è¡Œ
    return human_response["data"]  # ğŸ“¥ ç­‰å¾…äººç±»è¾“å…¥åç»§ç»­
```

**å…³é”®ç‚¹**ï¼š
- `interrupt()` ä¼š**æš‚åœå›¾çš„æ‰§è¡Œ**
- ä¼ å…¥çš„å‚æ•° `{"query": query}` æ˜¯**å‘é€ç»™äººç±»çš„ä¿¡æ¯**
- å‡½æ•°ä¼šç­‰å¾…**äººç±»çš„å“åº”**æ‰ç»§ç»­æ‰§è¡Œ

#### 2ï¸âƒ£ **Command çš„ resume å‚æ•°**

ä»æºä»£ç å¯ä»¥çœ‹åˆ° `Command` çš„å®šä¹‰ï¼š
```python
@dataclass
class Command:
    resume: dict[str, Any] | Any | None = None
```

**`resume` å‚æ•°çš„ä½œç”¨**ï¼š
- æä¾›**ä¸­æ–­æ¢å¤æ—¶çš„æ•°æ®**
- å¯ä»¥æ˜¯å­—å…¸æˆ–ä»»ä½•å€¼
- è¿™ä¸ªå€¼ä¼šè¢«ä¼ é€’ç»™ `interrupt()` å‡½æ•°ä½œä¸ºè¿”å›å€¼

#### 3ï¸âƒ£ **æ•°æ®æµå‘åˆ†æ**

```
1. human_assistance å·¥å…·è¢«è°ƒç”¨
   â†“
2. interrupt({"query": query}) æ‰§è¡Œ
   â†“
3. å›¾æš‚åœï¼Œç­‰å¾…äººç±»è¾“å…¥
   â†“
4. äººç±»æä¾› Command(resume={"data": response})
   â†“
5. interrupt() è¿”å› {"data": response}
   â†“
6. return human_response["data"] æå– response
```


#### 4ï¸âƒ£ **å®Œæ•´æ‰§è¡Œæµç¨‹å›¾è§£**

```
ç”¨æˆ·é—®é¢˜: "I need expert guidance..."
         â†“
    LLM å†³å®šè°ƒç”¨ human_assistance å·¥å…·
         â†“
    human_assistance(query="...") è¢«è°ƒç”¨
         â†“
    interrupt({"query": query}) æ‰§è¡Œ
         â†“
    ğŸ›‘ å›¾æš‚åœï¼snapshot.next = ("my_tools",)
         â†“
    äººç±»æŸ¥çœ‹æš‚åœçŠ¶æ€ï¼Œå‡†å¤‡å›åº”
         â†“
    Command(resume={"data": "We recommend LangGraph..."})
         â†“
    å›¾æ¢å¤æ‰§è¡Œï¼Œinterrupt() è¿”å› {"data": "We recommend..."}
         â†“
    human_assistance è¿”å› "We recommend LangGraph..."
         â†“
    å·¥å…·æ‰§è¡Œå®Œæ¯•ï¼Œå›åˆ° chatbot èŠ‚ç‚¹
         â†“
    LLM åŸºäºå·¥å…·ç»“æœç”Ÿæˆæœ€ç»ˆå›ç­”
```

#### 5ï¸âƒ£ **ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·çš„æ•°æ®ç»“æ„ï¼Ÿ**

**é—®é¢˜**: ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ `Command(resume=human_response)` ï¼Ÿ

**ç­”æ¡ˆ**: å› ä¸º `interrupt()` å’Œå·¥å…·çš„è®¾è®¡éœ€è¦ï¼š

1. **æ•°æ®åŒ…è£…**: `interrupt({"query": query})` å‘é€çš„æ˜¯ä¸€ä¸ªå­—å…¸
2. **æ•°æ®æå–**: `human_response["data"]` éœ€è¦ä»å­—å…¸ä¸­æå–å…·ä½“å€¼
3. **ä¿æŒä¸€è‡´**: å‘é€å’Œæ¥æ”¶çš„æ•°æ®æ ¼å¼è¦åŒ¹é…

#### 6ï¸âƒ£ **å®é™…ä»£ç å¯¹åº”å…³ç³»**

```python
# å‘é€ä¸­æ–­è¯·æ±‚
interrupt({"query": "I need help with..."})
#           â†‘
#         å‘é€ç»™äººç±»çš„ä¿¡æ¯

# äººç±»å“åº”
Command(resume={"data": "We recommend LangGraph..."})
#               â†‘
#             äººç±»çš„å›ç­”è¢«åŒ…è£…åœ¨ "data" å­—æ®µä¸­

# å·¥å…·æ¥æ”¶å¹¶å¤„ç†
human_response = interrupt(...)  # æ¥æ”¶ {"data": "We recommend..."}
return human_response["data"]    # æå– "We recommend LangGraph..."
```

### ğŸ’¡ **æ€»ç»“ï¼šä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·ä½¿ç”¨ Commandï¼Ÿ**

#### ğŸ”‘ **æ ¸å¿ƒç­”æ¡ˆ**

`Command(resume={"data": human_response})` ä¹‹æ‰€ä»¥å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼Œæ˜¯å› ä¸ºï¼š

1. **æ•°æ®å¥‘çº¦**: `interrupt()` å’Œ `Command` ä¹‹é—´æœ‰çº¦å®šçš„æ•°æ®æ ¼å¼
2. **çŠ¶æ€æ¢å¤**: `Command.resume` ä¸“é—¨ç”¨äºå‘ä¸­æ–­çš„å‡½æ•°æä¾›æ¢å¤æ•°æ®
3. **ç»“æ„åŒ¹é…**: å‘é€çš„æ•°æ®ç»“æ„å¿…é¡»ä¸å·¥å…·æœŸæœ›çš„ç»“æ„åŒ¹é…

#### ğŸ“‹ **å…³é”®è¦ç‚¹**

| æ¦‚å¿µ | ä½œç”¨ | ç¤ºä¾‹ |
|------|------|------|
| **interrupt()** | æš‚åœæ‰§è¡Œï¼Œç­‰å¾…äººç±»è¾“å…¥ | `interrupt({"query": "éœ€è¦å¸®åŠ©"})` |
| **Command.resume** | æä¾›æ¢å¤æ‰§è¡Œçš„æ•°æ® | `Command(resume={"data": "äººç±»å›åº”"})` |
| **æ•°æ®æå–** | ä»æ¢å¤æ•°æ®ä¸­æå–æœ‰ç”¨ä¿¡æ¯ | `human_response["data"]` |

#### ğŸ¯ **å®é™…åº”ç”¨æ¨¡å¼**

```python
# æ¨¡å¼1: ç®€å•å­—ç¬¦ä¸²
interrupt("éœ€è¦å¸®åŠ©å—ï¼Ÿ")
Command(resume="æ˜¯çš„ï¼Œæˆ‘éœ€è¦å¸®åŠ©")

# æ¨¡å¼2: ç»“æ„åŒ–æ•°æ®ï¼ˆæ¨èï¼‰
interrupt({"question": "é€‰æ‹©æ–¹æ¡ˆ", "options": ["A", "B", "C"]})
Command(resume={"choice": "B", "reason": "æ€§èƒ½æ›´å¥½"})

# æ¨¡å¼3: å¤æ‚å¯¹è±¡
interrupt({"type": "approval", "action": "delete_file", "file": "important.txt"})
Command(resume={"approved": True, "timestamp": "2024-08-15"})
```

#### ğŸš€ **ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ**

1. **ç±»å‹å®‰å…¨**: ç»“æ„åŒ–æ•°æ®å‡å°‘é”™è¯¯
2. **å¯æ‰©å±•**: å¯ä»¥ä¼ é€’å¤æ‚çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
3. **ä¸€è‡´æ€§**: ç»Ÿä¸€çš„æ•°æ®äº¤æ¢æ ¼å¼
4. **è°ƒè¯•å‹å¥½**: æ¸…æ™°çš„æ•°æ®æµå‘ä¾¿äºè°ƒè¯•

#### ğŸ’» **æ–°æ‰‹å»ºè®®**

- âœ… **ä¿æŒæ•°æ®æ ¼å¼ä¸€è‡´**: å‘é€ä»€ä¹ˆæ ¼å¼ï¼Œå°±ç”¨ä»€ä¹ˆæ ¼å¼æ¢å¤
- âœ… **ä½¿ç”¨æè¿°æ€§é”®å**: å¦‚ `{"data": ...}` æ¯” `{"value": ...}` æ›´æ¸…æ™°
- âœ… **æ£€æŸ¥æ•°æ®ç»“æ„**: ç¡®ä¿ `human_response["data"]` ä¸­çš„é”®å­˜åœ¨
- âœ… **å¯ç”¨æ£€æŸ¥ç‚¹**: `interrupt()` éœ€è¦æ£€æŸ¥ç‚¹æœºåˆ¶æ‰èƒ½å·¥ä½œ


### æŠ€æœ¯æ·±å…¥ï¼šä¸ºä»€ä¹ˆ stream() èƒ½å¤„ç† Commandï¼Ÿ
ğŸ“ LangGraph.stream() æ–¹æ³•çš„è¾“å…¥å¤„ç†æœºåˆ¶ï¼š

1ï¸âƒ£ **å¤šæ€è¾“å…¥è®¾è®¡**
   stream(input, config) ä¸­çš„ input å‚æ•°å¯ä»¥æ˜¯ï¼š
   - âœ… dict: æ™®é€šçš„å›¾çŠ¶æ€è¾“å…¥
   - âœ… Command: æ§åˆ¶æŒ‡ä»¤å¯¹è±¡
   - âœ… None: ç»§ç»­æ‰§è¡Œå½“å‰çŠ¶æ€

2ï¸âƒ£ **Command å¯¹è±¡çš„ç‰¹æ®Šå­—æ®µ**
   Command åŒ…å«ä»¥ä¸‹æ§åˆ¶å­—æ®µï¼š
   - resume: æ¢å¤ä¸­æ–­çš„æ•°æ®
   - update: æ›´æ–°å›¾çŠ¶æ€çš„æ•°æ®  
   - goto: è·³è½¬åˆ°æŒ‡å®šèŠ‚ç‚¹
   - graph: æŒ‡å®šç›®æ ‡å›¾

3ï¸âƒ£ **å†…éƒ¨å¤„ç†é€»è¾‘**
   å½“ stream() æ¥æ”¶åˆ° Command æ—¶ï¼š
   ```python
   if isinstance(input, Command):
       if input.resume is not None:
           # å¤„ç†ä¸­æ–­æ¢å¤
           æ¢å¤è¢«ä¸­æ–­çš„æ‰§è¡Œï¼Œæä¾› resume æ•°æ®
       if input.update is not None:
           # æ›´æ–°å›¾çŠ¶æ€
           å°† update æ•°æ®åˆå¹¶åˆ°å½“å‰çŠ¶æ€
       if input.goto:
           # è·³è½¬èŠ‚ç‚¹
           å¼ºåˆ¶æ‰§è¡ŒæŒ‡å®šçš„èŠ‚ç‚¹
   else:
       # ä½œä¸ºæ™®é€šè¾“å…¥å¤„ç†
       å¼€å§‹æ–°çš„å›¾æ‰§è¡Œæµç¨‹
```

4ï¸âƒ£ **ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ**
   - âœ… ç»Ÿä¸€æ¥å£: åŒä¸€ä¸ªæ–¹æ³•å¤„ç†ä¸åŒç±»å‹çš„æ“ä½œ
   - âœ… çµæ´»æ§åˆ¶: å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ§åˆ¶å›¾çš„è¡Œä¸º
   - âœ… çŠ¶æ€ç®¡ç†: ä¸æ£€æŸ¥ç‚¹ç³»ç»Ÿæ— ç¼é›†æˆ
   - âœ… äººæœºäº¤äº’: æ”¯æŒä¸­æ–­å’Œæ¢å¤å·¥ä½œæµ

5ï¸âƒ£ **å®é™…åº”ç”¨åœºæ™¯**
   - äººå·¥å®¡æ‰¹å·¥ä½œæµ
   - é”™è¯¯æ¢å¤æœºåˆ¶  
   - åŠ¨æ€è·¯ç”±æ§åˆ¶
   - è°ƒè¯•å’Œæµ‹è¯•